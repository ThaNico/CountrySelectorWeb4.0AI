<!DOCTYPE html>
<html>
<head>
	<title>Dumb</title>
	
	<style>
		#container {
			width:180px;
		}
		#countryViewer {
			height:20px;
			background:aliceblue;
			border:1px solid #000042;
			border-radius:69%;
			margin: 0 auto;
			margin-top:.42em;
		}
		.flagImage {
			width:25px;
			position:absolute;
		}
	</style>
</head>
<body>
	<div id="container">
		<label for="country">Please select your country :</label><br>
		<input id="country" name="country" placeholder="..." readonly="true" onclick="doMagic(this)"/>
		<div id="countryViewer"></div>
	</div>
	
	<script type="text/javascript" src="countries.json"></script>
	<script type="text/javascript">
		var countries = JSON.parse(countries);
		var countryIndex = 0;
		var stop;
		
		function doMagic(elem) {
			stop = false;
			startFlagImage();
			setTimeout(startFlagImage, 500);
		}
		
		function startFlagImage() {
			if(stop)
				return;
				
			var country = countries[countryIndex];
			countryIndex++;
			if(countryIndex >= countries.length) {
				countryIndex = 0;
				console.log("really ? tf are you doing reading this");
			}
			
			var img = createFlagImage(country);
			document.getElementById("countryViewer").appendChild(img);
			
			var timer = setInterval(function () {
				var newLeft = parseFloat(img.style.left) + 0.69;
				img.style.left = newLeft + "px";
			  
				if ((img.offsetWidth + newLeft > img.parentElement.clientWidth) || stop) {
					endFlagImage(timer, img);
				}
			}, 10);
		}
		
		function createFlagImage(country) {
			var img = document.createElement("img");
			img.src = "flags/" + country["code"] + ".svg";
			img.classList.add("flagImage");
			img.style.left = "0px";
			img.onclick = function() {
				stop = true;
				document.getElementById("country").value = country["name"]
			}
			return img;
		}
		
		function endFlagImage(timer, img) {
			clearInterval(timer);
			img.remove();
			startFlagImage();
		}
		
	</script>
</body>
</html>